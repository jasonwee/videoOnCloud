<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2016-07-27 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160727" />
    <meta http-equiv="Content-Language" content="en" />
    <title>PMD Java &#x2013; Optimization</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.4.min.js"></script>

    
                  </head>
        <body class="topBarEnabled">
          
    
    
            
    
        
    <a href="https://github.com/pmd/pmd">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
                
                                                                                <a class="brand" href="../../index.html"  title="PMD">

                                
                                                                                                                    <img src="../../images/logo/pmd_logo_tiny.png" alt="PMD" />
                
                </a>
                    
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Parent Project <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../../../index.html"  title="PMD">PMD</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Rule Sets <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="../../rules/index.html"  title="java">java</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="../../rules/java/android.html"  title="Android">Android</a>
</li>
                                  <li>      <a href="../../rules/java/basic.html"  title="Basic">Basic</a>
</li>
                                  <li>      <a href="../../rules/java/braces.html"  title="Braces">Braces</a>
</li>
                                  <li>      <a href="../../rules/java/clone.html"  title="Clone Implementation">Clone Implementation</a>
</li>
                                  <li>      <a href="../../rules/java/codesize.html"  title="Code Size">Code Size</a>
</li>
                                  <li>      <a href="../../rules/java/comments.html"  title="Comments">Comments</a>
</li>
                                  <li>      <a href="../../rules/java/controversial.html"  title="Controversial">Controversial</a>
</li>
                                  <li>      <a href="../../rules/java/coupling.html"  title="Coupling">Coupling</a>
</li>
                                  <li>      <a href="../../rules/java/design.html"  title="Design">Design</a>
</li>
                                  <li>      <a href="../../rules/java/empty.html"  title="Empty Code">Empty Code</a>
</li>
                                  <li>      <a href="../../rules/java/finalizers.html"  title="Finalizer">Finalizer</a>
</li>
                                  <li>      <a href="../../rules/java/imports.html"  title="Import Statements">Import Statements</a>
</li>
                                  <li>      <a href="../../rules/java/j2ee.html"  title="J2EE">J2EE</a>
</li>
                                  <li>      <a href="../../rules/java/javabeans.html"  title="JavaBeans">JavaBeans</a>
</li>
                                  <li>      <a href="../../rules/java/junit.html"  title="JUnit">JUnit</a>
</li>
                                  <li>      <a href="../../rules/java/logging-jakarta-commons.html"  title="Jakarta Commons Logging">Jakarta Commons Logging</a>
</li>
                                  <li>      <a href="../../rules/java/logging-java.html"  title="Java Logging">Java Logging</a>
</li>
                                  <li>      <a href="../../rules/java/migrating.html"  title="Migration">Migration</a>
</li>
                                  <li>      <a href="../../rules/java/naming.html"  title="Naming">Naming</a>
</li>
                                  <li>      <a href="../../rules/java/optimizations.html"  title="Optimization">Optimization</a>
</li>
                                  <li>      <a href="../../rules/java/strictexception.html"  title="Strict Exceptions">Strict Exceptions</a>
</li>
                                  <li>      <a href="../../rules/java/strings.html"  title="String and StringBuffer">String and StringBuffer</a>
</li>
                                  <li>      <a href="../../rules/java/sunsecure.html"  title="Security Code Guidelines">Security Code Guidelines</a>
</li>
                                  <li>      <a href="../../rules/java/typeresolution.html"  title="Type Resolution">Type Resolution</a>
</li>
                                  <li>      <a href="../../rules/java/unnecessary.html"  title="Unnecessary">Unnecessary</a>
</li>
                                  <li>      <a href="../../rules/java/unusedcode.html"  title="Unused Code">Unused Code</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="../../project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="../../project-summary.html"  title="Project Summary">Project Summary</a>
</li>
                                  <li>      <a href="../../dependencies.html"  title="Dependencies">Dependencies</a>
</li>
                                  <li>      <a href="../../dependency-convergence.html"  title="Dependency Convergence">Dependency Convergence</a>
</li>
                                  <li>      <a href="../../dependency-info.html"  title="Dependency Information">Dependency Information</a>
</li>
                                  <li>      <a href="../../dependency-management.html"  title="Dependency Management">Dependency Management</a>
</li>
                                  <li>      <a href="../../plugin-management.html"  title="Plugin Management">Plugin Management</a>
</li>
                                  <li>      <a href="../../plugins.html"  title="Project Plugins">Project Plugins</a>
</li>
                                  <li>      <a href="../../team-list.html"  title="Project Team">Project Team</a>
</li>
                                  <li>      <a href="../../mail-lists.html"  title="Mailing Lists">Mailing Lists</a>
</li>
                                  <li>      <a href="../../integration.html"  title="Continuous Integration">Continuous Integration</a>
</li>
                                  <li>      <a href="../../issue-tracking.html"  title="Issue Tracking">Issue Tracking</a>
</li>
                                  <li>      <a href="../../license.html"  title="Project License">Project License</a>
</li>
                                  <li>      <a href="../../source-repository.html"  title="Source Repository">Source Repository</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="../../project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="../../xref/index.html"  title="Source Xref">Source Xref</a>
</li>
                                  <li>      <a href="../../xref-test/index.html"  title="Test Source Xref">Test Source Xref</a>
</li>
                                  <li>      <a href="../../apidocs/index.html"  title="JavaDocs">JavaDocs</a>
</li>
                                  <li>      <a href="../../testapidocs/index.html"  title="Test JavaDocs">Test JavaDocs</a>
</li>
                                  <li>      <a href="../../cpd.html"  title="CPD">CPD</a>
</li>
                                  <li>      <a href="../../pmd.html"  title="PMD">PMD</a>
</li>
                                  <li>      <a href="../../checkstyle.html"  title="Checkstyle">Checkstyle</a>
</li>
                                  <li>      <a href="../../surefire-report.html"  title="Surefire Report">Surefire Report</a>
</li>
                                  <li>      <a href="../../jacoco/index.html"  title="JaCoCo Test">JaCoCo Test</a>
</li>
                                  <li>      <a href="../../dependency-updates-report.html"  title="Dependency Updates Report">Dependency Updates Report</a>
</li>
                                  <li>      <a href="../../plugin-updates-report.html"  title="Plugin Updates Report">Plugin Updates Report</a>
</li>
                                  <li>      <a href="../../property-updates-report.html"  title="Property Updates Report">Property Updates Report</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
          
          
                               <ul class="nav pull-right">
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">External Links <b class="caret"></b></a>
                <ul class="dropdown-menu">
                      <li>      <a href="http://sourceforge.net/projects/pmd"  title="SourceForge.net Project Page">SourceForge.net Project Page</a>
</li>
      <li>      <a href="http://sourceforge.net"  title="Hosted by SourceForge">Hosted by SourceForge</a>
</li>
                  </ul>
              </li>
            </ul>
          
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../../../" id="bannerLeft">
                                                                                                <img src="../../../images/logo/pmd_logo_small.png"  alt="pmd-logo"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://sourceforge.net/" id="bannerRight">
                                                                                                <img src="../../../images/sflogo.png"  alt="SourceForge"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2016-07-27
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 5.5.1
                          <span class="divider">|</span>
                      </li>
                                      <li class="">
                    <a href="http://www.sourceforge.net/" class="externalLink" title="SourceForge">
        SourceForge</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="../../../" title="PMD">
        PMD</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="../../" title="PMD Java">
        PMD Java</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Optimization</li>
                
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Parent Project</li>
                              
      <li>
  
                          <a href="../../../index.html" title="PMD">
          <span class="none"></span>
        PMD</a>
            </li>
                              <li class="nav-header">Rule Sets</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="../../rules/index.html" title="java">
          <span class="icon-chevron-down"></span>
        java</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="../../rules/java/android.html" title="Android">
          <span class="none"></span>
        Android</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/basic.html" title="Basic">
          <span class="none"></span>
        Basic</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/braces.html" title="Braces">
          <span class="none"></span>
        Braces</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/clone.html" title="Clone Implementation">
          <span class="none"></span>
        Clone Implementation</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/codesize.html" title="Code Size">
          <span class="none"></span>
        Code Size</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/comments.html" title="Comments">
          <span class="none"></span>
        Comments</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/controversial.html" title="Controversial">
          <span class="none"></span>
        Controversial</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/coupling.html" title="Coupling">
          <span class="none"></span>
        Coupling</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/design.html" title="Design">
          <span class="none"></span>
        Design</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/empty.html" title="Empty Code">
          <span class="none"></span>
        Empty Code</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/finalizers.html" title="Finalizer">
          <span class="none"></span>
        Finalizer</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/imports.html" title="Import Statements">
          <span class="none"></span>
        Import Statements</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/j2ee.html" title="J2EE">
          <span class="none"></span>
        J2EE</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/javabeans.html" title="JavaBeans">
          <span class="none"></span>
        JavaBeans</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/junit.html" title="JUnit">
          <span class="none"></span>
        JUnit</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/logging-jakarta-commons.html" title="Jakarta Commons Logging">
          <span class="none"></span>
        Jakarta Commons Logging</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/logging-java.html" title="Java Logging">
          <span class="none"></span>
        Java Logging</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/migrating.html" title="Migration">
          <span class="none"></span>
        Migration</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/naming.html" title="Naming">
          <span class="none"></span>
        Naming</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>Optimization</a>
          </li>
                    
      <li>
  
                          <a href="../../rules/java/strictexception.html" title="Strict Exceptions">
          <span class="none"></span>
        Strict Exceptions</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/strings.html" title="String and StringBuffer">
          <span class="none"></span>
        String and StringBuffer</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/sunsecure.html" title="Security Code Guidelines">
          <span class="none"></span>
        Security Code Guidelines</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/typeresolution.html" title="Type Resolution">
          <span class="none"></span>
        Type Resolution</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/unnecessary.html" title="Unnecessary">
          <span class="none"></span>
        Unnecessary</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/unusedcode.html" title="Unused Code">
          <span class="none"></span>
        Unused Code</a>
            </li>
              </ul>
        </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="../../project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="../../project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                   <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Built by Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                                                                                                    <a href="http://sourceforge.net/" title="SourceForge.net" class="builtBy">
        <img class="builtBy"  alt="SourceForge.net. Fast, secure and Free Open Source software downloads" src="http://sflogo.sourceforge.net/sflogo.php?group_id=56262&type=10"   width="80"  height="15" />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Optimization</h1>
<p>These rules deal with different optimizations that generally apply to best practices.</p>
<div class="section">
<h2><a name="LocalVariableCouldBeFinal"></a>LocalVariableCouldBeFinal</h2>
<p>Since: PMD 2.2</p>
<p>Priority: 3</p>
<p>A local variable assigned only once can be declared final.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/optimizations/LocalVariableCouldBeFinalRule.html">net.sourceforge.pmd.lang.java.rule.optimizations.LocalVariableCouldBeFinalRule</a></p>
<p>Example(s):</p>

<div>
<pre>
  
public class Bar {
	public void foo () {
		String txtA = &quot;a&quot;; 		// if txtA will not be assigned again it is better to do this:
		final String txtB = &quot;b&quot;;
	}
}
  
      </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="MethodArgumentCouldBeFinal"></a>MethodArgumentCouldBeFinal</h2>
<p>Since: PMD 2.2</p>
<p>Priority: 3</p>
<p>A method argument that is never re-assigned within the method can be declared final.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/optimizations/MethodArgumentCouldBeFinalRule.html">net.sourceforge.pmd.lang.java.rule.optimizations.MethodArgumentCouldBeFinalRule</a></p>
<p>Example(s):</p>

<div>
<pre>
  
public void foo1 (String param) {	// do stuff with param never assigning it
  
}

public void foo2 (final String param) {	// better, do stuff with param never assigning it
  
}
  
      </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="AvoidInstantiatingObjectsInLoops"></a>AvoidInstantiatingObjectsInLoops</h2>
<p>Since: PMD 2.2</p>
<p>Priority: 3</p>
<p>New objects created within loops should be checked to see if they can created outside them and reused.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/optimizations/AvoidInstantiatingObjectsInLoopsRule.html">net.sourceforge.pmd.lang.java.rule.optimizations.AvoidInstantiatingObjectsInLoopsRule</a></p>
<p>Example(s):</p>

<div>
<pre>

public class Something {
	public static void main( String as[] ) {  
		for (int i = 0; i &lt; 10; i++) {
		    Foo f = new Foo(); // Avoid this whenever you can it's really expensive
		}
	}
}

    </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="UseArrayListInsteadOfVector"></a>UseArrayListInsteadOfVector</h2>
<p>Since: PMD 3.0</p>
<p>Priority: 3</p>
<p>ArrayList is a much better Collection implementation than Vector if thread-safe operation is not required.</p>

<div>
<pre>

//CompilationUnit[count(ImportDeclaration) = 0 or count(ImportDeclaration/Name[@Image='java.util.Vector']) &gt; 0]
  //AllocationExpression/ClassOrInterfaceType
    [@Image='Vector' or @Image='java.util.Vector']

              </pre></div>
<p>Example(s):</p>

<div>
<pre>

public class SimpleTest extends TestCase {
	public void testX() {
		Collection c1 = new Vector();		
		Collection c2 = new ArrayList();	// achieves the same with much better performance
	}
}

          </pre></div></div>
<div class="section">
<h2><a name="SimplifyStartsWith"></a>SimplifyStartsWith</h2>
<p>Since: PMD 3.1</p>
<p>Priority: 3</p>
<p>Since it passes in a literal of length 1, calls to (string).startsWith can be rewritten using (string).charAt(0) at the expense of some readability.</p>

<div>
<pre>

//PrimaryExpression
 [PrimaryPrefix/Name
  [ends-with(@Image, '.startsWith')] or PrimarySuffix[@Image='startsWith']]
 [PrimarySuffix/Arguments/ArgumentList
  /Expression/PrimaryExpression/PrimaryPrefix
  /Literal
   [string-length(@Image)=3]
   [starts-with(@Image, '&quot;')]
   [ends-with(@Image, '&quot;')]
 ]
 
            </pre></div>
<p>Example(s):</p>

<div>
<pre>
  
public class Foo {

	boolean checkIt(String x) {
		return x.startsWith(&quot;a&quot;);	// suboptimal
	}
  
	boolean fasterCheckIt(String x) {
		return x.charAt(0) == 'a';	//	faster approach
	}
}

      </pre></div></div>
<div class="section">
<h2><a name="UseStringBufferForStringAppends"></a>UseStringBufferForStringAppends</h2>
<p>Since: PMD 3.1</p>
<p>Priority: 3</p>
<p>The use of the &#x2018;+=&#x2019; operator for appending strings causes the JVM to create and use an internal StringBuffer. If a non-trivial number of these concatenations are being used then the explicit use of a StringBuilder or threadsafe StringBuffer is recommended to avoid this.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/optimizations/UseStringBufferForStringAppendsRule.html">net.sourceforge.pmd.lang.java.rule.optimizations.UseStringBufferForStringAppendsRule</a></p>
<p>Example(s):</p>

<div>
<pre>
      
public class Foo {
  void bar() {
    String a;
    a = &quot;foo&quot;;
    a += &quot; bar&quot;;
   // better would be:
   // StringBuilder a = new StringBuilder(&quot;foo&quot;);
   // a.append(&quot; bar);
  }
}
      
           </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="UseArraysAsList"></a>UseArraysAsList</h2>
<p>Since: PMD 3.5</p>
<p>Priority: 3</p>
<p>The java.util.Arrays class has a &#x201c;asList&#x201d; method that should be used when you want to create a new List from an array of objects. It is faster than executing a loop to copy all the elements of the array one by one.</p>

<div>
<pre>
   
//Statement[
    (ForStatement) and (ForStatement//VariableInitializer//Literal[@IntLiteral='true' and @Image='0']) and (count(.//IfStatement)=0)
   ]
   //StatementExpression[
    PrimaryExpression/PrimaryPrefix/Name[
     substring-before(@Image,'.add') = ancestor::MethodDeclaration//LocalVariableDeclaration[
      ./Type//ClassOrInterfaceType[
       @Image = 'Collection' or 
       @Image = 'List' or @Image='ArrayList'
      ]
     ]
     /VariableDeclarator/VariableDeclaratorId[
      count(..//AllocationExpression/ClassOrInterfaceType[
       @Image=&quot;ArrayList&quot;
      ]
      )=1
     ]/@Image
    ]
   and
   PrimaryExpression/PrimarySuffix/Arguments/ArgumentList/Expression/PrimaryExpression/PrimaryPrefix/Name
   [
     @Image = ancestor::MethodDeclaration//LocalVariableDeclaration[@Array=&quot;true&quot;]/VariableDeclarator/VariableDeclaratorId/@Image
     or
     @Image = ancestor::MethodDeclaration//FormalParameter/VariableDeclaratorId/@Image
   ]
   /../..[count(.//PrimarySuffix)
   =1]/PrimarySuffix/Expression/PrimaryExpression/PrimaryPrefix
   /Name
   ]
   
       </pre></div>
<p>Example(s):</p>

<div>
<pre>
   
public class Test {
  public void foo(Integer[] ints) {
    // could just use Arrays.asList(ints)
     List l= new ArrayList(10);
     for (int i=0; i&lt; 100; i++) {
       l.add(ints[i]);
     }
     for (int i=0; i&lt; 100; i++) {
       l.add(a[i].toString()); // won't trigger the rule
     }
  }
}
   
     </pre></div></div>
<div class="section">
<h2><a name="AvoidArrayLoops"></a>AvoidArrayLoops</h2>
<p>Since: PMD 3.5</p>
<p>Priority: 3</p>
<p>Instead of manually copying data between two arrays, use the efficient System.arraycopy method instead.</p>

<div>
<pre>
    
//Statement[(ForStatement or WhileStatement) and
count(*//AssignmentOperator[@Image = '='])=1
and
*/Statement
[
./Block/BlockStatement/Statement/StatementExpression/PrimaryExpression
/PrimaryPrefix/Name/../../PrimarySuffix/Expression
[(PrimaryExpression or AdditiveExpression) and count
(.//PrimaryPrefix/Name)=1]//PrimaryPrefix/Name/@Image
and
./Block/BlockStatement/Statement/StatementExpression/Expression/PrimaryExpression
/PrimaryPrefix/Name/../../PrimarySuffix[count
(..//PrimarySuffix)=1]/Expression[(PrimaryExpression
or AdditiveExpression) and count(.//PrimaryPrefix/Name)=1]
//PrimaryPrefix/Name/@Image
]]
    
        </pre></div>
<p>Example(s):</p>

<div>
<pre>
    
public class Test {
  public void bar() {
    int[] a = new int[10];
    int[] b = new int[10];
    for (int i=0;i&lt;10;i++) {
      b[i]=a[i];
    }
  }
}
     // this will trigger the rule
     for (int i=0;i&lt;10;i++) {
       b[i]=a[c[i]];
     }

  }
}
    
      </pre></div></div>
<div class="section">
<h2><a name="UnnecessaryWrapperObjectCreation"></a>UnnecessaryWrapperObjectCreation</h2>
<p>Since: PMD 3.8</p>
<p>Priority: 3</p>
<p>Most wrapper classes provide static conversion methods that avoid the need to create intermediate objects just to create the primitive forms. Using these avoids the cost of creating objects that also need to be garbage-collected later.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/optimizations/UnnecessaryWrapperObjectCreationRule.html">net.sourceforge.pmd.lang.java.rule.optimizations.UnnecessaryWrapperObjectCreationRule</a></p>
<p>Example(s):</p>

<div>
<pre>

public int convert(String s) {
  int i, i2;

  i = Integer.valueOf(s).intValue(); // this wastes an object
  i = Integer.parseInt(s); 			 // this is better

  i2 = Integer.valueOf(i).intValue(); // this wastes an object
  i2 = i; // this is better

  String s3 = Integer.valueOf(i2).toString(); // this wastes an object
  s3 = Integer.toString(i2); 		// this is better

  return i2;
}

          </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="AddEmptyString"></a>AddEmptyString</h2>
<p>Since: PMD 4.0</p>
<p>Priority: 3</p>
<p>The conversion of literals to strings by concatenating them with empty strings is inefficient. It is much better to use one of the type-specific toString() methods instead.</p>

<div>
<pre>
                     
//AdditiveExpression/PrimaryExpression/PrimaryPrefix/Literal[@Image='&quot;&quot;']
                
                </pre></div>
<p>Example(s):</p>

<div>
<pre>
             
String s = &quot;&quot; + 123; 				// inefficient 
String t = Integer.toString(456); 	// preferred approach
            
        </pre></div></div>
<div class="section">
<h2><a name="RedundantFieldInitializer"></a>RedundantFieldInitializer</h2>
<p>Since: PMD 5.0</p>
<p>Priority: 3</p>
<p>Java will initialize fields with known default values so any explicit initialization of those same defaults is redundant and results in a larger class file (approximately three additional bytecode instructions per field).</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/optimizations/RedundantFieldInitializerRule.html">net.sourceforge.pmd.lang.java.rule.optimizations.RedundantFieldInitializerRule</a></p>
<p>Example(s):</p>

<div>
<pre>
              
public class C {
	boolean b	= false;	// examples of redundant initializers
	byte by		= 0;
	short s		= 0;
	char c		= 0;
	int i		= 0;
	long l		= 0;
	
	float f		= .0f;    // all possible float literals
	doable d	= 0d;     // all possible double literals
	Object o	= null;
	
	MyClass mca[] = null;
	int i1 = 0, ia1[] = null;
	
	class Nested {
		boolean b = false;
	}
}
              
              </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="PrematureDeclaration"></a>PrematureDeclaration</h2>
<p>Since: PMD 5.0</p>
<p>Priority: 3</p>
<p>Checks for variables that are defined before they might be used. A reference is deemed to be premature if it is created right before a block of code that doesn&#x2019;t use it that also has the ability to return or throw an exception.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/optimizations/PrematureDeclarationRule.html">net.sourceforge.pmd.lang.java.rule.optimizations.PrematureDeclarationRule</a></p>
<p>Example(s):</p>

<div>
<pre>
              
public int getLength(String[] strings) {
  
  int length = 0;	// declared prematurely

  if (strings == null || strings.length == 0) return 0;
  
  for (String str : strings) {
    length += str.length();
    }

  return length;
}
              
              </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2002&#x2013;2016
                        <a href="http://pmd.sourceforge.net/">InfoEther</a>.
            All rights reserved.      
                    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
