<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2016-07-27 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160727" />
    <meta http-equiv="Content-Language" content="en" />
    <title>PMD Java &#x2013; Design</title>
    <link rel="stylesheet" href="../../css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />

      
    <script type="text/javascript" src="../../js/apache-maven-fluido-1.4.min.js"></script>

    
                  </head>
        <body class="topBarEnabled">
          
    
    
            
    
        
    <a href="https://github.com/pmd/pmd">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
                
                                                                                <a class="brand" href="../../index.html"  title="PMD">

                                
                                                                                                                    <img src="../../images/logo/pmd_logo_tiny.png" alt="PMD" />
                
                </a>
                    
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Parent Project <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../../../index.html"  title="PMD">PMD</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Rule Sets <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="../../rules/index.html"  title="java">java</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="../../rules/java/android.html"  title="Android">Android</a>
</li>
                                  <li>      <a href="../../rules/java/basic.html"  title="Basic">Basic</a>
</li>
                                  <li>      <a href="../../rules/java/braces.html"  title="Braces">Braces</a>
</li>
                                  <li>      <a href="../../rules/java/clone.html"  title="Clone Implementation">Clone Implementation</a>
</li>
                                  <li>      <a href="../../rules/java/codesize.html"  title="Code Size">Code Size</a>
</li>
                                  <li>      <a href="../../rules/java/comments.html"  title="Comments">Comments</a>
</li>
                                  <li>      <a href="../../rules/java/controversial.html"  title="Controversial">Controversial</a>
</li>
                                  <li>      <a href="../../rules/java/coupling.html"  title="Coupling">Coupling</a>
</li>
                                  <li>      <a href="../../rules/java/design.html"  title="Design">Design</a>
</li>
                                  <li>      <a href="../../rules/java/empty.html"  title="Empty Code">Empty Code</a>
</li>
                                  <li>      <a href="../../rules/java/finalizers.html"  title="Finalizer">Finalizer</a>
</li>
                                  <li>      <a href="../../rules/java/imports.html"  title="Import Statements">Import Statements</a>
</li>
                                  <li>      <a href="../../rules/java/j2ee.html"  title="J2EE">J2EE</a>
</li>
                                  <li>      <a href="../../rules/java/javabeans.html"  title="JavaBeans">JavaBeans</a>
</li>
                                  <li>      <a href="../../rules/java/junit.html"  title="JUnit">JUnit</a>
</li>
                                  <li>      <a href="../../rules/java/logging-jakarta-commons.html"  title="Jakarta Commons Logging">Jakarta Commons Logging</a>
</li>
                                  <li>      <a href="../../rules/java/logging-java.html"  title="Java Logging">Java Logging</a>
</li>
                                  <li>      <a href="../../rules/java/migrating.html"  title="Migration">Migration</a>
</li>
                                  <li>      <a href="../../rules/java/naming.html"  title="Naming">Naming</a>
</li>
                                  <li>      <a href="../../rules/java/optimizations.html"  title="Optimization">Optimization</a>
</li>
                                  <li>      <a href="../../rules/java/strictexception.html"  title="Strict Exceptions">Strict Exceptions</a>
</li>
                                  <li>      <a href="../../rules/java/strings.html"  title="String and StringBuffer">String and StringBuffer</a>
</li>
                                  <li>      <a href="../../rules/java/sunsecure.html"  title="Security Code Guidelines">Security Code Guidelines</a>
</li>
                                  <li>      <a href="../../rules/java/typeresolution.html"  title="Type Resolution">Type Resolution</a>
</li>
                                  <li>      <a href="../../rules/java/unnecessary.html"  title="Unnecessary">Unnecessary</a>
</li>
                                  <li>      <a href="../../rules/java/unusedcode.html"  title="Unused Code">Unused Code</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="../../project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="../../project-summary.html"  title="Project Summary">Project Summary</a>
</li>
                                  <li>      <a href="../../dependencies.html"  title="Dependencies">Dependencies</a>
</li>
                                  <li>      <a href="../../dependency-convergence.html"  title="Dependency Convergence">Dependency Convergence</a>
</li>
                                  <li>      <a href="../../dependency-info.html"  title="Dependency Information">Dependency Information</a>
</li>
                                  <li>      <a href="../../dependency-management.html"  title="Dependency Management">Dependency Management</a>
</li>
                                  <li>      <a href="../../plugin-management.html"  title="Plugin Management">Plugin Management</a>
</li>
                                  <li>      <a href="../../plugins.html"  title="Project Plugins">Project Plugins</a>
</li>
                                  <li>      <a href="../../team-list.html"  title="Project Team">Project Team</a>
</li>
                                  <li>      <a href="../../mail-lists.html"  title="Mailing Lists">Mailing Lists</a>
</li>
                                  <li>      <a href="../../integration.html"  title="Continuous Integration">Continuous Integration</a>
</li>
                                  <li>      <a href="../../issue-tracking.html"  title="Issue Tracking">Issue Tracking</a>
</li>
                                  <li>      <a href="../../license.html"  title="Project License">Project License</a>
</li>
                                  <li>      <a href="../../source-repository.html"  title="Source Repository">Source Repository</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="../../project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="../../xref/index.html"  title="Source Xref">Source Xref</a>
</li>
                                  <li>      <a href="../../xref-test/index.html"  title="Test Source Xref">Test Source Xref</a>
</li>
                                  <li>      <a href="../../apidocs/index.html"  title="JavaDocs">JavaDocs</a>
</li>
                                  <li>      <a href="../../testapidocs/index.html"  title="Test JavaDocs">Test JavaDocs</a>
</li>
                                  <li>      <a href="../../cpd.html"  title="CPD">CPD</a>
</li>
                                  <li>      <a href="../../pmd.html"  title="PMD">PMD</a>
</li>
                                  <li>      <a href="../../checkstyle.html"  title="Checkstyle">Checkstyle</a>
</li>
                                  <li>      <a href="../../surefire-report.html"  title="Surefire Report">Surefire Report</a>
</li>
                                  <li>      <a href="../../jacoco/index.html"  title="JaCoCo Test">JaCoCo Test</a>
</li>
                                  <li>      <a href="../../dependency-updates-report.html"  title="Dependency Updates Report">Dependency Updates Report</a>
</li>
                                  <li>      <a href="../../plugin-updates-report.html"  title="Plugin Updates Report">Plugin Updates Report</a>
</li>
                                  <li>      <a href="../../property-updates-report.html"  title="Property Updates Report">Property Updates Report</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
          
          
                               <ul class="nav pull-right">
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">External Links <b class="caret"></b></a>
                <ul class="dropdown-menu">
                      <li>      <a href="http://sourceforge.net/projects/pmd"  title="SourceForge.net Project Page">SourceForge.net Project Page</a>
</li>
      <li>      <a href="http://sourceforge.net"  title="Hosted by SourceForge">Hosted by SourceForge</a>
</li>
                  </ul>
              </li>
            </ul>
          
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../../../" id="bannerLeft">
                                                                                                <img src="../../../images/logo/pmd_logo_small.png"  alt="pmd-logo"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://sourceforge.net/" id="bannerRight">
                                                                                                <img src="../../../images/sflogo.png"  alt="SourceForge"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2016-07-27
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 5.5.1
                          <span class="divider">|</span>
                      </li>
                                      <li class="">
                    <a href="http://www.sourceforge.net/" class="externalLink" title="SourceForge">
        SourceForge</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="../../../" title="PMD">
        PMD</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="../../" title="PMD Java">
        PMD Java</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Design</li>
                
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Parent Project</li>
                              
      <li>
  
                          <a href="../../../index.html" title="PMD">
          <span class="none"></span>
        PMD</a>
            </li>
                              <li class="nav-header">Rule Sets</li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      
      <li>
  
                          <a href="../../rules/index.html" title="java">
          <span class="icon-chevron-down"></span>
        java</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="../../rules/java/android.html" title="Android">
          <span class="none"></span>
        Android</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/basic.html" title="Basic">
          <span class="none"></span>
        Basic</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/braces.html" title="Braces">
          <span class="none"></span>
        Braces</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/clone.html" title="Clone Implementation">
          <span class="none"></span>
        Clone Implementation</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/codesize.html" title="Code Size">
          <span class="none"></span>
        Code Size</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/comments.html" title="Comments">
          <span class="none"></span>
        Comments</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/controversial.html" title="Controversial">
          <span class="none"></span>
        Controversial</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/coupling.html" title="Coupling">
          <span class="none"></span>
        Coupling</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>Design</a>
          </li>
                    
      <li>
  
                          <a href="../../rules/java/empty.html" title="Empty Code">
          <span class="none"></span>
        Empty Code</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/finalizers.html" title="Finalizer">
          <span class="none"></span>
        Finalizer</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/imports.html" title="Import Statements">
          <span class="none"></span>
        Import Statements</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/j2ee.html" title="J2EE">
          <span class="none"></span>
        J2EE</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/javabeans.html" title="JavaBeans">
          <span class="none"></span>
        JavaBeans</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/junit.html" title="JUnit">
          <span class="none"></span>
        JUnit</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/logging-jakarta-commons.html" title="Jakarta Commons Logging">
          <span class="none"></span>
        Jakarta Commons Logging</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/logging-java.html" title="Java Logging">
          <span class="none"></span>
        Java Logging</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/migrating.html" title="Migration">
          <span class="none"></span>
        Migration</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/naming.html" title="Naming">
          <span class="none"></span>
        Naming</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/optimizations.html" title="Optimization">
          <span class="none"></span>
        Optimization</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/strictexception.html" title="Strict Exceptions">
          <span class="none"></span>
        Strict Exceptions</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/strings.html" title="String and StringBuffer">
          <span class="none"></span>
        String and StringBuffer</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/sunsecure.html" title="Security Code Guidelines">
          <span class="none"></span>
        Security Code Guidelines</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/typeresolution.html" title="Type Resolution">
          <span class="none"></span>
        Type Resolution</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/unnecessary.html" title="Unnecessary">
          <span class="none"></span>
        Unnecessary</a>
            </li>
                    
      <li>
  
                          <a href="../../rules/java/unusedcode.html" title="Unused Code">
          <span class="none"></span>
        Unused Code</a>
            </li>
              </ul>
        </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="../../project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="../../project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                   <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Built by Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                                                                                                    <a href="http://sourceforge.net/" title="SourceForge.net" class="builtBy">
        <img class="builtBy"  alt="SourceForge.net. Fast, secure and Free Open Source software downloads" src="http://sflogo.sourceforge.net/sflogo.php?group_id=56262&type=10"   width="80"  height="15" />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Design</h1>
<p>The Design ruleset contains rules that flag suboptimal code implementations. Alternate approaches are suggested.</p>
<div class="section">
<h2><a name="UseSingleton"></a>UseSingleton</h2>
<p><span style="border-radius: 0.25em; color: #fff; padding: 0.2em 0.6em 0.3em; display: inline; background-color: #d9534f;">Deprecated</span></p>
<p>This rule has been renamed. Use instead: <a href="#UseUtilityClass">UseUtilityClass</a></p></div>
<div class="section">
<h2><a name="UseUtilityClass"></a>UseUtilityClass</h2>
<p>Since: PMD 0.3</p>
<p>Priority: 3</p>
<p>For classes that only have static methods, consider making them utility classes. Note that this doesn&#x2019;t apply to abstract classes, since their subclasses may well include non-static methods. Also, if you want this class to be a utility class, remember to add a private constructor to prevent instantiation. (Note, that this use was known before PMD 5.1.0 as UseSingleton).</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/UseUtilityClassRule.html">net.sourceforge.pmd.lang.java.rule.design.UseUtilityClassRule</a></p>
<p>Example(s):</p>

<div>
<pre>

public class MaybeAUtility {
  public static void foo() {}
  public static void bar() {}
}

    </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="SimplifyBooleanReturns"></a>SimplifyBooleanReturns</h2>
<p>Since: PMD 0.9</p>
<p>Priority: 3</p>
<p>Avoid unnecessary if-then-else statements when returning a boolean. The result of the conditional test can be returned instead.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/SimplifyBooleanReturnsRule.html">net.sourceforge.pmd.lang.java.rule.design.SimplifyBooleanReturnsRule</a></p>
<p>Example(s):</p>

<div>
<pre>

public boolean isBarEqualTo(int x) {
   
	if (bar == x) {		 // this bit of code...
		return true;
	} else {
		return false;
    }
}

public boolean isBarEqualTo(int x) {

   	return bar == x;	// can be replaced with this
}

    </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="SimplifyBooleanExpressions"></a>SimplifyBooleanExpressions</h2>
<p>Since: PMD 1.05</p>
<p>Priority: 3</p>
<p>Avoid unnecessary comparisons in boolean expressions, they serve no purpose and impacts readability.</p>

<div>
<pre>

//EqualityExpression/PrimaryExpression
 /PrimaryPrefix/Literal/BooleanLiteral

              </pre></div>
<p>Example(s):</p>

<div>
<pre>
  
public class Bar {
  // can be simplified to
  // bar = isFoo();
  private boolean bar = (isFoo() == true);

  public isFoo() { return false;}
}
  
      </pre></div></div>
<div class="section">
<h2><a name="SwitchStmtsShouldHaveDefault"></a>SwitchStmtsShouldHaveDefault</h2>
<p>Since: PMD 1.0</p>
<p>Priority: 3</p>
<p>All switch statements should include a default option to catch any unspecified values.</p>

<div>
<pre>
                  
//SwitchStatement[not(SwitchLabel[@Default='true'])]
                  
              </pre></div>
<p>Example(s):</p>

<div>
<pre>

public void bar() {
    int x = 2;
    switch (x) {
      case 1: int j = 6;
      case 2: int j = 8;
      				// missing default: here
    }
}

    </pre></div></div>
<div class="section">
<h2><a name="AvoidDeeplyNestedIfStmts"></a>AvoidDeeplyNestedIfStmts</h2>
<p>Since: PMD 1.0</p>
<p>Priority: 3</p>
<p>Avoid creating deeply nested if-then statements since they are harder to read and error-prone to maintain.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/AvoidDeeplyNestedIfStmtsRule.html">net.sourceforge.pmd.lang.java.rule.design.AvoidDeeplyNestedIfStmtsRule</a></p>
<p>Example(s):</p>

<div>
<pre>

public class Foo {
  public void bar(int x, int y, int z) {
    if (x&gt;y) {
      if (y&gt;z) {
        if (z==x) {
         // !! too deep
        }
      }
    }
  }
}

    </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
        
<tr class="a">
            
<td>
                problemDepth
            </td>
            
<td>
                3
            </td>
            
<td>
                The if statement depth reporting threshold
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="AvoidReassigningParameters"></a>AvoidReassigningParameters</h2>
<p>Since: PMD 1.0</p>
<p>Priority: 2</p>
<p>Reassigning values to incoming parameters is not recommended. Use temporary local variables instead.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/AvoidReassigningParametersRule.html">net.sourceforge.pmd.lang.java.rule.design.AvoidReassigningParametersRule</a></p>
<p>Example(s):</p>

<div>
<pre>

public class Foo {
  private void foo(String bar) {
    bar = &quot;something else&quot;;
  }
}

    </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="SwitchDensity"></a>SwitchDensity</h2>
<p>Since: PMD 1.02</p>
<p>Priority: 3</p>
<p>A high ratio of statements to labels in a switch statement implies that the switch statement is overloaded. Consider moving the statements into new methods or creating subclasses based on the switch variable.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/SwitchDensityRule.html">net.sourceforge.pmd.lang.java.rule.design.SwitchDensityRule</a></p>
<p>Example(s):</p>

<div>
<pre>
 
public class Foo {
  public void bar(int x) {
    switch (x) {
      case 1: {
        // lots of statements
        break;
      } case 2: {
        // lots of statements
        break;
      }
    }
  }
}
 
      </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
        
<tr class="a">
            
<td>
                topscore
            </td>
            
<td>
                
            </td>
            
<td>
                Top score value
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                minimum
            </td>
            
<td>
                10.0
            </td>
            
<td>
                Minimum reporting threshold
            </td>
        </tr>
    
        
<tr class="a">
            
<td>
                sigma
            </td>
            
<td>
                
            </td>
            
<td>
                Sigma value
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="ConstructorCallsOverridableMethod"></a>ConstructorCallsOverridableMethod</h2>
<p>Since: PMD 1.04</p>
<p>Priority: 1</p>
<p>Calling overridable methods during construction poses a risk of invoking methods on an incompletely constructed object and can be difficult to debug. It may leave the sub-class unable to construct its superclass or forced to replicate the construction process completely within itself, losing the ability to call super(). If the default constructor contains a call to an overridable method, the subclass may be completely uninstantiable. Note that this includes method calls throughout the control flow graph - i.e., if a constructor Foo() calls a private method bar() that calls a public method buz(), this denotes a problem.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/ConstructorCallsOverridableMethodRule.html">net.sourceforge.pmd.lang.java.rule.design.ConstructorCallsOverridableMethodRule</a></p>
<p>Example(s):</p>

<div>
<pre>
  
public class SeniorClass {
  public SeniorClass(){
      toString(); //may throw NullPointerException if overridden
  }
  public String toString(){
    return &quot;IAmSeniorClass&quot;;
  }
}
public class JuniorClass extends SeniorClass {
  private String name;
  public JuniorClass(){
    super(); //Automatic call leads to NullPointerException
    name = &quot;JuniorClass&quot;;
  }
  public String toString(){
    return name.toUpperCase();
  }
}
  
      </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="AccessorClassGeneration"></a>AccessorClassGeneration</h2>
<p>Since: PMD 1.04</p>
<p>Priority: 3</p>
<p>Instantiation by way of private constructors from outside of the constructor&#x2019;s class often causes the generation of an accessor. A factory method, or non-privatization of the constructor can eliminate this situation. The generated class file is actually an interface. It gives the accessing class the ability to invoke a new hidden package scope constructor that takes the interface as a supplementary parameter. This turns a private constructor effectively into one with package scope, and is challenging to discern.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/AccessorClassGenerationRule.html">net.sourceforge.pmd.lang.java.rule.design.AccessorClassGenerationRule</a></p>
<p>Example(s):</p>

<div>
<pre>
  
public class Outer {
 void method(){
  Inner ic = new Inner();//Causes generation of accessor class
 }
 public class Inner {
  private Inner(){}
 }
}
  
      </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="FinalFieldCouldBeStatic"></a>FinalFieldCouldBeStatic</h2>
<p>Since: PMD 1.1</p>
<p>Priority: 3</p>
<p>If a final field is assigned to a compile-time constant, it could be made static, thus saving overhead in each object at runtime.</p>

<div>
<pre>
                    
//FieldDeclaration
 [@Final='true' and @Static='false']
 [not (../../../../ClassOrInterfaceDeclaration[@Interface='true'])]
   /VariableDeclarator/VariableInitializer/Expression
    /PrimaryExpression[not(PrimarySuffix)]/PrimaryPrefix/Literal
                    
                </pre></div>
<p>Example(s):</p>

<div>
<pre>
  
public class Foo {
  public final int BAR = 42; // this could be static and save some space
}
  
      </pre></div></div>
<div class="section">
<h2><a name="CloseResource"></a>CloseResource</h2>
<p>Since: PMD 1.2.2</p>
<p>Priority: 3</p>
<p>Ensure that resources (like Connection, Statement, and ResultSet objects) are always closed after use.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/CloseResourceRule.html">net.sourceforge.pmd.lang.java.rule.design.CloseResourceRule</a></p>
<p>Example(s):</p>

<div>
<pre>

public class Bar {
  public void foo() {
    Connection c = pool.getConnection();
    try {
      // do stuff
    } catch (SQLException ex) {
     // handle exception
    } finally {
      // oops, should close the connection using 'close'!
      // c.close();
    }
  }
}

    </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
        
<tr class="a">
            
<td>
                closeAsDefaultTarget
            </td>
            
<td>
                true
            </td>
            
<td>
                Consider 'close' as a target by default
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                types
            </td>
            
<td>
                [java.sql.Connection, java.sql.Statement, java.sql.ResultSet]
            </td>
            
<td>
                Affected types
            </td>
        </tr>
    
        
<tr class="a">
            
<td>
                closeTargets
            </td>
            
<td>
                []
            </td>
            
<td>
                Methods which may close this resource
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="NonStaticInitializer"></a>NonStaticInitializer</h2>
<p>Since: PMD 1.5</p>
<p>Priority: 3</p>
<p>A non-static initializer block will be called any time a constructor is invoked (just prior to invoking the constructor). While this is a valid language construct, it is rarely used and is confusing.</p>

<div>
<pre>

//Initializer[@Static='false']

                 </pre></div>
<p>Example(s):</p>

<div>
<pre>
   
public class MyClass {
 // this block gets run before any call to a constructor
  {
   System.out.println(&quot;I am about to construct myself&quot;);
  }
}
   
       </pre></div></div>
<div class="section">
<h2><a name="DefaultLabelNotLastInSwitchStmt"></a>DefaultLabelNotLastInSwitchStmt</h2>
<p>Since: PMD 1.5</p>
<p>Priority: 3</p>
<p>By convention, the default label should be the last label in a switch statement.</p>

<div>
<pre>

//SwitchStatement
 [not(SwitchLabel[position() = last()][@Default='true'])]
 [SwitchLabel[@Default='true']]

                 </pre></div>
<p>Example(s):</p>

<div>
<pre>
   
public class Foo {
  void bar(int a) {
   switch (a) {
    case 1:  // do something
       break;
    default:  // the default case should be last, by convention
       break;
    case 2:
       break;
   }
  }
}   
       </pre></div></div>
<div class="section">
<h2><a name="NonCaseLabelInSwitchStatement"></a>NonCaseLabelInSwitchStatement</h2>
<p>Since: PMD 1.5</p>
<p>Priority: 3</p>
<p>A non-case label (e.g. a named break/continue label) was present in a switch statement. This legal, but confusing. It is easy to mix up the case labels and the non-case labels.</p>

<div>
<pre>
 
//SwitchStatement//BlockStatement/Statement/LabeledStatement
 
                 </pre></div>
<p>Example(s):</p>

<div>
<pre>
   
public class Foo {
  void bar(int a) {
   switch (a) {
     case 1:
       // do something
       break;
     mylabel: // this is legal, but confusing!
       break;
     default:
       break;
    }
  }
}
   
       </pre></div></div>
<div class="section">
<h2><a name="OptimizableToArrayCall"></a>OptimizableToArrayCall</h2>
<p>Since: PMD 1.8</p>
<p>Priority: 3</p>
<p>Calls to a collection&#x2019;s toArray() method should specify target arrays sized to match the size of the collection. Initial arrays that are too small are discarded in favour of new ones that have to be created that are the proper size.</p>

<div>
<pre>
                  
//PrimaryExpression
[PrimaryPrefix/Name[ends-with(@Image, 'toArray')]]
[
PrimarySuffix/Arguments/ArgumentList/Expression
 /PrimaryExpression/PrimaryPrefix/AllocationExpression
 /ArrayDimsAndInits/Expression/PrimaryExpression/PrimaryPrefix/Literal[@Image='0']
]

                  
              </pre></div>
<p>Example(s):</p>

<div>
<pre>
  
List foos = getFoos();
  
    // inefficient, the array will be discarded
Foo[] fooArray = foos.toArray(new Foo[0]);
    
    // much better; this one sizes the destination array, 
    // avoiding of a new one via reflection
Foo[] fooArray = foos.toArray(new Foo[foos.size()]);
  
      </pre></div></div>
<div class="section">
<h2><a name="BadComparison"></a>BadComparison</h2>
<p>Since: PMD 1.8</p>
<p>Priority: 3</p>
<p>Avoid equality comparisons with Double.NaN. Due to the implicit lack of representation precision when comparing floating point numbers these are likely to cause logic errors.</p>

<div>
<pre>
                  
//EqualityExpression[@Image='==']
 /PrimaryExpression/PrimaryPrefix
 /Name[@Image='Double.NaN' or @Image='Float.NaN']
                  
              </pre></div>
<p>Example(s):</p>

<div>
<pre>
  
boolean x = (y == Double.NaN);
  
      </pre></div></div>
<div class="section">
<h2><a name="EqualsNull"></a>EqualsNull</h2>
<p>Since: PMD 1.9</p>
<p>Priority: 1</p>
<p>Tests for null should not use the equals() method. The &#x2018;==&#x2019; operator should be used instead.</p>

<div>
<pre>
    
//PrimaryExpression
  [
    PrimaryPrefix[Name[ends-with(@Image, 'equals')]]
      [following-sibling::node()/Arguments/ArgumentList[count(Expression)=1]
          /Expression/PrimaryExpression/PrimaryPrefix/Literal/NullLiteral]

    or

    PrimarySuffix[ends-with(@Image, 'equals')]
      [following-sibling::node()/Arguments/ArgumentList[count(Expression)=1]
          /Expression/PrimaryExpression/PrimaryPrefix/Literal/NullLiteral]

  ]
    
                </pre></div>
<p>Example(s):</p>

<div>
<pre>
       
String x = &quot;foo&quot;;

if (x.equals(null)) { // bad form
   	doSomething();
	}
	
if (x == null) { 	// preferred
   	doSomething();
	}
    
        </pre></div></div>
<div class="section">
<h2><a name="ConfusingTernary"></a>ConfusingTernary</h2>
<p>Since: PMD 1.9</p>
<p>Priority: 3</p>
<p>Avoid negation within an &#x201c;if&#x201d; expression with an &#x201c;else&#x201d; clause. For example, rephrase:</p>
<p>if (x != y) diff(); else same(); as:  if (x == y) same(); else diff();</p>
<p>Most &#x201c;if (x != y)&#x201d; cases without an &#x201c;else&#x201d; are often return cases, so consistent use of this rule makes the code easier to read. Also, this resolves trivial ordering problems, such as &#x201c;does the error case go first?&#x201d; or &#x201c;does the common case go first?&#x201d;.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/ConfusingTernaryRule.html">net.sourceforge.pmd.lang.java.rule.design.ConfusingTernaryRule</a></p>
<p>Example(s):</p>

<div>
<pre>
          
boolean bar(int x, int y) {
  return (x != y) ? diff : same;
 }
          
        </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
        
<tr class="a">
            
<td>
                ignoreElseIf
            </td>
            
<td>
                false
            </td>
            
<td>
                Ignore conditions with an else-if case
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="InstantiationToGetClass"></a>InstantiationToGetClass</h2>
<p>Since: PMD 2.0</p>
<p>Priority: 4</p>
<p>Avoid instantiating an object just to call getClass() on it; use the .class public member instead.</p>

<div>
<pre>
                
//PrimarySuffix
 [@Image='getClass']
 [parent::PrimaryExpression
  [PrimaryPrefix/AllocationExpression]
  [count(PrimarySuffix) = 2]
 ]
     
            </pre></div>
<p>Example(s):</p>

<div>
<pre>
    
  // replace this
Class c = new String().getClass();

  // with this:
Class c = String.class;

    
        </pre></div></div>
<div class="section">
<h2><a name="IdempotentOperations"></a>IdempotentOperations</h2>
<p>Since: PMD 2.0</p>
<p>Priority: 3</p>
<p>Avoid idempotent operations - they have no effect.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/IdempotentOperationsRule.html">net.sourceforge.pmd.lang.java.rule.design.IdempotentOperationsRule</a></p>
<p>Example(s):</p>

<div>
<pre>
      
public class Foo {
 public void bar() {
  int x = 2;
  x = x;
 }
}
      
      </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="SimpleDateFormatNeedsLocale"></a>SimpleDateFormatNeedsLocale</h2>
<p>Since: PMD 2.0</p>
<p>Priority: 3</p>
<p>Be sure to specify a Locale when creating SimpleDateFormat instances to ensure that locale-appropriate formatting is used.</p>

<div>
<pre>

//AllocationExpression
 [ClassOrInterfaceType[@Image='SimpleDateFormat']]
 [Arguments[@ArgumentCount=1]]

                    </pre></div>
<p>Example(s):</p>

<div>
<pre>
        
public class Foo {
  // Should specify Locale.US (or whatever)
  private SimpleDateFormat sdf = new SimpleDateFormat(&quot;pattern&quot;);
}
        
        </pre></div></div>
<div class="section">
<h2><a name="ImmutableField"></a>ImmutableField</h2>
<p>Since: PMD 2.0</p>
<p>Priority: 3</p>
<p>Identifies private fields whose values never change once they are initialized either in the declaration of the field or by a constructor. This helps in converting existing classes to becoming immutable ones.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/ImmutableFieldRule.html">net.sourceforge.pmd.lang.java.rule.design.ImmutableFieldRule</a></p>
<p>Example(s):</p>

<div>
<pre>
  
public class Foo {
  private int x; // could be final
  public Foo() {
      x = 7;
  }
  public void foo() {
     int a = x + 2;
  }
}
  
      </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="UseLocaleWithCaseConversions"></a>UseLocaleWithCaseConversions</h2>
<p>Since: PMD 2.0</p>
<p>Priority: 3</p>
<p>When doing String.toLowerCase()/toUpperCase() conversions, use Locales to avoids problems with languages that have unusual conventions, i.e. Turkish.</p>

<div>
<pre>
                
//PrimaryExpression
[PrimaryPrefix/Name
 [ends-with(@Image, 'toLowerCase') or ends-with(@Image,
'toUpperCase')]
 ]
[PrimarySuffix[position() = 1]/Arguments[@ArgumentCount=0]]
     
            </pre></div>
<p>Example(s):</p>

<div>
<pre>
    
class Foo {
 // BAD
 if (x.toLowerCase().equals(&quot;list&quot;)) { }
 /*
 This will not match &quot;LIST&quot; when in Turkish locale
 The above could be
 if (x.toLowerCase(Locale.US).equals(&quot;list&quot;)) { }
 or simply
 if (x.equalsIgnoreCase(&quot;list&quot;)) { }
 */
 // GOOD
 String z = a.toLowerCase(Locale.EN);
}
    
        </pre></div></div>
<div class="section">
<h2><a name="AvoidProtectedFieldInFinalClass"></a>AvoidProtectedFieldInFinalClass</h2>
<p>Since: PMD 2.1</p>
<p>Priority: 3</p>
<p>Do not use protected fields in final classes since they cannot be subclassed. Clarify your intent by using private or package access modifiers instead.</p>

<div>
<pre>

//ClassOrInterfaceDeclaration[@Final='true']
/ClassOrInterfaceBody/ClassOrInterfaceBodyDeclaration
/FieldDeclaration[@Protected='true']
 
                 </pre></div>
<p>Example(s):</p>

<div>
<pre>

public final class Bar {
  private int x;
  protected int y;  // bar cannot be subclassed, so is y really private or package visible?
  Bar() {}
}
 
         </pre></div></div>
<div class="section">
<h2><a name="AssignmentToNonFinalStatic"></a>AssignmentToNonFinalStatic</h2>
<p>Since: PMD 2.2</p>
<p>Priority: 3</p>
<p>Identifies a possible unsafe usage of a static field.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/AssignmentToNonFinalStaticRule.html">net.sourceforge.pmd.lang.java.rule.design.AssignmentToNonFinalStaticRule</a></p>
<p>Example(s):</p>

<div>
<pre>
   
public class StaticField {
   static int x;
   public FinalFields(int y) {
    x = y; // unsafe
   }
}
   
       </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="MissingStaticMethodInNonInstantiatableClass"></a>MissingStaticMethodInNonInstantiatableClass</h2>
<p>Since: PMD 3.0</p>
<p>Priority: 3</p>
<p>A class that has private constructors and does not have any static methods or fields cannot be used.</p>

<div>
<pre>
    
//ClassOrInterfaceDeclaration[@Nested='false']
[
  (
    count(./ClassOrInterfaceBody/ClassOrInterfaceBodyDeclaration/ConstructorDeclaration)&gt;0
    and
    count(./ClassOrInterfaceBody/ClassOrInterfaceBodyDeclaration/ConstructorDeclaration) = count(./ClassOrInterfaceBody/ClassOrInterfaceBodyDeclaration/ConstructorDeclaration[@Private='true'])
  )
  and
  count(.//MethodDeclaration[@Static='true'])=0
  and
  count(.//FieldDeclaration[@Private='false'][@Static='true'])=0
  and
  count(.//ClassOrInterfaceDeclaration[@Nested='true']
           [@Public='true']
           [@Static='true']
           [count(./ClassOrInterfaceBody/ClassOrInterfaceBodyDeclaration/ConstructorDeclaration[@Public='true']) &gt; 0]
           [count(./ClassOrInterfaceBody/ClassOrInterfaceBodyDeclaration/MethodDeclaration
                    [@Public='true']
                    [./ResultType/Type/ReferenceType/ClassOrInterfaceType
                        [@Image = //ClassOrInterfaceDeclaration[@Nested='false']/@Image]
                    ]
            ) &gt; 0]
        ) = 0
  and
  count(//ClassOrInterfaceDeclaration
            [@Nested='true']
            [@Static='true']
            [@Public='true']
            [.//MethodDeclaration
              [@Public='true']
              [.//ReturnStatement//AllocationExpression
                [ClassOrInterfaceType
                    [@Image = //ClassOrInterfaceDeclaration/@Image]
                ]
                [./Arguments//PrimaryPrefix/@ThisModifier='true']
              ]
            ]
       ) = 0
]
    
              </pre></div>
<p>Example(s):</p>

<div>
<pre>

// This class is unusable, since it cannot be
// instantiated (private constructor),
// and no static method can be called.

public class Foo {
  private Foo() {}
  void foo() {}
}


      </pre></div></div>
<div class="section">
<h2><a name="AvoidSynchronizedAtMethodLevel"></a>AvoidSynchronizedAtMethodLevel</h2>
<p>Since: PMD 3.0</p>
<p>Priority: 3</p>
<p>Method-level synchronization can cause problems when new code is added to the method.<br />Block-level synchronization helps to ensure that only the code that needs synchronization gets it.</p>

<div>
<pre>
    
//MethodDeclaration[@Synchronized='true']
    
              </pre></div>
<p>Example(s):</p>

<div>
<pre>

public class Foo {
  // Try to avoid this:
  synchronized void foo() {
  }
  // Prefer this:
  void bar() {
    synchronized(this) {
    }
  }

  // Try to avoid this for static methods:
  static synchronized void fooStatic() {
  }
  
  // Prefer this:
  static void barStatic() {
    synchronized(Foo.class) {
    }
  }
}

      </pre></div></div>
<div class="section">
<h2><a name="MissingBreakInSwitch"></a>MissingBreakInSwitch</h2>
<p>Since: PMD 3.0</p>
<p>Priority: 3</p>
<p>Switch statements without break or return statements for each case option may indicate problematic behaviour. Empty cases are ignored as these indicate an intentional fall-through.</p>

<div>
<pre>
    
//SwitchStatement
[(count(.//BreakStatement)
 + count(BlockStatement//Statement/ReturnStatement)
 + count(BlockStatement//Statement/ThrowStatement)
 + count(BlockStatement//Statement/IfStatement[@Else='true' and Statement[2][ReturnStatement|ThrowStatement]]/Statement[1][ReturnStatement|ThrowStatement])
 + count(SwitchLabel[name(following-sibling::node()) = 'SwitchLabel'])
 + count(SwitchLabel[count(following-sibling::node()) = 0])
  &lt; count (SwitchLabel))]
    
              </pre></div>
<p>Example(s):</p>

<div>
<pre>

public void bar(int status) {
    switch(status) {
      case CANCELLED:
        doCancelled();
        // break; hm, should this be commented out?
      case NEW:
        doNew();
        // is this really a fall-through?
      case REMOVED:
        doRemoved();
        // what happens if you add another case after this one?
      case OTHER: // empty case - this is interpreted as an intentional fall-through
      case ERROR:
        doErrorHandling();
        break;
    }
}

      </pre></div></div>
<div class="section">
<h2><a name="UseNotifyAllInsteadOfNotify"></a>UseNotifyAllInsteadOfNotify</h2>
<p>Since: PMD 3.0</p>
<p>Priority: 3</p>
<p>Thread.notify() awakens a thread monitoring the object. If more than one thread is monitoring, then only one is chosen. The thread chosen is arbitrary; thus its usually safer to call notifyAll() instead.</p>

<div>
<pre>
    
//StatementExpression/PrimaryExpression
[PrimarySuffix/Arguments[@ArgumentCount = '0']]
[
PrimaryPrefix[./Name[@Image='notify' or ends-with(@Image,'.notify')]
or ../PrimarySuffix/@Image='notify'
or (./AllocationExpression and ../PrimarySuffix[@Image='notify'])
]
]
    
              </pre></div>
<p>Example(s):</p>

<div>
<pre>

  void bar() {
    x.notify();
    // If many threads are monitoring x, only one (and you won't know which) will be notified.
    // use instead:
    x.notifyAll();
  }

      </pre></div></div>
<div class="section">
<h2><a name="AvoidInstanceofChecksInCatchClause"></a>AvoidInstanceofChecksInCatchClause</h2>
<p>Since: PMD 3.0</p>
<p>Priority: 3</p>
<p>Each caught exception type should be handled in its own catch clause.</p>

<div>
<pre>
    
//CatchStatement/FormalParameter
 /following-sibling::Block//InstanceOfExpression/PrimaryExpression/PrimaryPrefix
  /Name[
   @Image = ./ancestor::Block/preceding-sibling::FormalParameter
    /VariableDeclaratorId/@Image
  ]
    
              </pre></div>
<p>Example(s):</p>

<div>
<pre>

try { // Avoid this
 // do something
} catch (Exception ee) {
 if (ee instanceof IOException) {
  cleanup();
 }
}
try {  // Prefer this:
 // do something
} catch (IOException ee) {
 cleanup();
}

      </pre></div></div>
<div class="section">
<h2><a name="AbstractClassWithoutAbstractMethod"></a>AbstractClassWithoutAbstractMethod</h2>
<p>Since: PMD 3.0</p>
<p>Priority: 3</p>
<p>The abstract class does not contain any abstract methods. An abstract class suggests an incomplete implementation, which is to be completed by subclasses implementing the abstract methods. If the class is intended to be used as a base class only (not to be instantiated directly) a protected constructor can be provided prevent direct instantiation.</p>

<div>
<pre>
//ClassOrInterfaceDeclaration
 [@Abstract='true'
  and count( .//MethodDeclaration[@Abstract='true'] )=0 ]
  [count(ImplementsList)=0]
  [count(.//ExtendsList)=0]
              
              </pre></div>
<p>Example(s):</p>

<div>
<pre>

public abstract class Foo {
  void int method1() { ... }
  void int method2() { ... }
  // consider using abstract methods or removing
  // the abstract modifier and adding protected constructors
}

      </pre></div></div>
<div class="section">
<h2><a name="SimplifyConditional"></a>SimplifyConditional</h2>
<p>Since: PMD 3.1</p>
<p>Priority: 3</p>
<p>No need to check for null before an instanceof; the instanceof keyword returns false when given a null argument.</p>

<div>
<pre>
                      
//Expression
 [ConditionalOrExpression
 [EqualityExpression[@Image='==']
  //NullLiteral
  and
  UnaryExpressionNotPlusMinus
   [@Image='!']//InstanceOfExpression[PrimaryExpression
     //Name/@Image = ancestor::ConditionalOrExpression/EqualityExpression
      /PrimaryExpression/PrimaryPrefix/Name/@Image]
  and
  (count(UnaryExpressionNotPlusMinus) + 1 = count(*))
 ]
or
ConditionalAndExpression
 [EqualityExpression[@Image='!=']//NullLiteral
 and
InstanceOfExpression
 [PrimaryExpression[count(PrimarySuffix[@ArrayDereference='true'])=0]
  //Name[not(contains(@Image,'.'))]/@Image = ancestor::ConditionalAndExpression
   /EqualityExpression/PrimaryExpression/PrimaryPrefix/Name/@Image]
 and
(count(InstanceOfExpression) + 1 = count(*))
 ]
]
 
                  </pre></div>
<p>Example(s):</p>

<div>
<pre>
      
class Foo {
  void bar(Object x) {
    if (x != null &amp;&amp; x instanceof Bar) {
      // just drop the &quot;x != null&quot; check
    }
  }
}      
           </pre></div></div>
<div class="section">
<h2><a name="CompareObjectsWithEquals"></a>CompareObjectsWithEquals</h2>
<p>Since: PMD 3.2</p>
<p>Priority: 3</p>
<p>Use equals() to compare object references; avoid comparing them with ==.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/CompareObjectsWithEqualsRule.html">net.sourceforge.pmd.lang.java.rule.design.CompareObjectsWithEqualsRule</a></p>
<p>Example(s):</p>

<div>
<pre>

class Foo {
  boolean bar(String a, String b) {
    return a == b;
  }
}


  </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="PositionLiteralsFirstInComparisons"></a>PositionLiteralsFirstInComparisons</h2>
<p>Since: PMD 3.3</p>
<p>Priority: 3</p>
<p>Position literals first in comparisons, if the second argument is null then NullPointerExceptions can be avoided, they will just return false.</p>

<div>
<pre>
              
//PrimaryExpression[
        PrimaryPrefix[Name
                [
	(ends-with(@Image, '.equals'))
                ]
        ]
        [
                   (../PrimarySuffix/Arguments/ArgumentList/Expression/PrimaryExpression/PrimaryPrefix/Literal[@StringLiteral='true'])
	and
	( count(../PrimarySuffix/Arguments/ArgumentList/Expression) = 1 )
        ]
]
[not(ancestor::Expression/ConditionalAndExpression//EqualityExpression[@Image='!=']//NullLiteral)]
[not(ancestor::Expression/ConditionalOrExpression//EqualityExpression[@Image='==']//NullLiteral)]

          
          </pre></div>
<p>Example(s):</p>

<div>
<pre>

class Foo {
  boolean bar(String x) {
    return x.equals(&quot;2&quot;); // should be &quot;2&quot;.equals(x)
  }
}


  </pre></div></div>
<div class="section">
<h2><a name="PositionLiteralsFirstInCaseInsensitiveComparisons"></a>PositionLiteralsFirstInCaseInsensitiveComparisons</h2>
<p>Since: PMD 5.1</p>
<p>Priority: 3</p>
<p>Position literals first in comparisons, if the second argument is null then NullPointerExceptions can be avoided, they will just return false.</p>

<div>
<pre>
              
//PrimaryExpression[
        PrimaryPrefix[Name
                [
    (ends-with(@Image, '.equalsIgnoreCase'))
                ]
        ]
        [
                   (../PrimarySuffix/Arguments/ArgumentList/Expression/PrimaryExpression/PrimaryPrefix/Literal)
    and
    ( count(../PrimarySuffix/Arguments/ArgumentList/Expression) = 1 )
        ]
]
[not(ancestor::Expression/ConditionalAndExpression//EqualityExpression[@Image='!=']//NullLiteral)]
[not(ancestor::Expression/ConditionalOrExpression//EqualityExpression[@Image='==']//NullLiteral)]

          
          </pre></div>
<p>Example(s):</p>

<div>
<pre>

class Foo {
  boolean bar(String x) {
    return x.equalsIgnoreCase(&quot;2&quot;); // should be &quot;2&quot;.equalsIgnoreCase(x)
  }
}


  </pre></div></div>
<div class="section">
<h2><a name="UnnecessaryLocalBeforeReturn"></a>UnnecessaryLocalBeforeReturn</h2>
<p>Since: PMD 3.3</p>
<p>Priority: 3</p>
<p>Avoid the creation of unnecessary local variables</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/UnnecessaryLocalBeforeReturnRule.html">net.sourceforge.pmd.lang.java.rule.design.UnnecessaryLocalBeforeReturnRule</a></p>
<p>Example(s):</p>

<div>
<pre>
  
public class Foo {
   public int foo() {
     int x = doSomething();
     return x;  // instead, just 'return doSomething();'
   }
}
  
      </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="NonThreadSafeSingleton"></a>NonThreadSafeSingleton</h2>
<p>Since: PMD 3.4</p>
<p>Priority: 3</p>
<p>Non-thread safe singletons can result in bad state changes. Eliminate static singletons if possible by instantiating the object directly. Static singletons are usually not needed as only a single instance exists anyway. Other possible fixes are to synchronize the entire method or to use an initialize-on-demand holder class (do not use the double-check idiom).</p>
<p>See Effective Java, item 48.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/NonThreadSafeSingletonRule.html">net.sourceforge.pmd.lang.java.rule.design.NonThreadSafeSingletonRule</a></p>
<p>Example(s):</p>

<div>
<pre>
private static Foo foo = null;

//multiple simultaneous callers may see partially initialized objects
public static Foo getFoo() {
    if (foo==null) {
        foo = new Foo();
    }
    return foo;
}
        </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
        
<tr class="a">
            
<td>
                checkNonStaticFields
            </td>
            
<td>
                false
            </td>
            
<td>
                Check for non-static fields.  Do not set this to true and checkNonStaticMethods to false.
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                checkNonStaticMethods
            </td>
            
<td>
                true
            </td>
            
<td>
                Check for non-static methods.  Do not set this to false and checkNonStaticFields to true.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="SingleMethodSingleton"></a>SingleMethodSingleton</h2>
<p>Since: PMD 5.4</p>
<p>Priority: 2</p>
<p>Some classes contain overloaded getInstance. The problem with overloaded getInstance methods is that the instance created using the overloaded method is not cached and so,  for each call and new objects will be created for every invocation.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/SingleMethodSingletonRule.html">net.sourceforge.pmd.lang.java.rule.design.SingleMethodSingletonRule</a></p>
<p>Example(s):</p>

<div>
<pre>
public class Singleton {

   private static Singleton singleton = new Singleton( );
   
  private Singleton(){ }
   
public static Singleton getInstance( ) {
	  return singleton;
}
public static Singleton getInstance(Object obj){
	Singleton singleton = (Singleton) obj;
	return singleton;			//violation
}
}

</pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="SingletonClassReturningNewInstance"></a>SingletonClassReturningNewInstance</h2>
<p>Since: PMD 5.4</p>
<p>Priority: 2</p>
<p>Some classes contain overloaded getInstance. The problem with overloaded getInstance methods is that the instance created using the overloaded method is not cached and so,  for each call and new objects will be created for every invocation.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/SingletonClassReturningNewInstanceRule.html">net.sourceforge.pmd.lang.java.rule.design.SingletonClassReturningNewInstanceRule</a></p>
<p>Example(s):</p>

<div>
<pre>
class Singleton {
	private static Singleton instance = null;
	public static Singleton getInstance() {
	synchronized(Singleton.class){
		return new Singleton();					
	}
	}
}

</pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="UncommentedEmptyMethodBody"></a>UncommentedEmptyMethodBody</h2>
<p>Since: PMD 3.4</p>
<p>Priority: 3</p>
<p>Uncommented Empty Method Body finds instances where a method body does not contain statements, but there is no comment. By explicitly commenting empty method bodies it is easier to distinguish between intentional (commented) and unintentional empty methods.</p>

<div>
<pre>
    
//MethodDeclaration/Block[count(BlockStatement) = 0 and @containsComment = 'false']
 
             </pre></div>
<p>Example(s):</p>

<div>
<pre>
  
public void doSomething() {
}
 
      </pre></div></div>
<div class="section">
<h2><a name="UncommentedEmptyConstructor"></a>UncommentedEmptyConstructor</h2>
<p>Since: PMD 3.4</p>
<p>Priority: 3</p>
<p>Uncommented Empty Constructor finds instances where a constructor does not contain statements, but there is no comment. By explicitly commenting empty constructors it is easier to distinguish between intentional (commented) and unintentional empty constructors.</p>

<div>
<pre>
    
//ConstructorDeclaration[@Private='false'][count(BlockStatement) = 0 and ($ignoreExplicitConstructorInvocation = 'true' or not(ExplicitConstructorInvocation)) and @containsComment = 'false']
 
             </pre></div>
<p>Example(s):</p>

<div>
<pre>
  
public Foo() {
  // This constructor is intentionally empty. Nothing special is needed here.
}
 
      </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                ignoreExplicitConstructorInvocation
            </td>
            
<td>
                false
            </td>
            
<td>
                Ignore explicit constructor invocation when deciding whether constructor is empty or not
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="AvoidConstantsInterface"></a>AvoidConstantsInterface</h2>
<p>Since: PMD 3.5</p>
<p>Priority: 3</p>
<p>An interface should be used only to characterize the external behaviour of an implementing class: using an interface as a container of constants is a poor usage pattern and not recommended.</p>

<div>
<pre>
    
//ClassOrInterfaceDeclaration[@Interface=&quot;true&quot;]
    [
     count(.//MethodDeclaration)=0
     and
     count(.//FieldDeclaration)&gt;0
    ]
    
        </pre></div>
<p>Example(s):</p>

<div>
<pre>
    
public interface ConstantsInterface {
   public static final int CONSTANT1=0;
   public static final String CONSTANT2=&quot;1&quot;;
}
    
      </pre></div></div>
<div class="section">
<h2><a name="UnsynchronizedStaticDateFormatter"></a>UnsynchronizedStaticDateFormatter</h2>
<p>Since: PMD 3.6</p>
<p>Priority: 3</p>
<p>SimpleDateFormat instances are not synchronized. Sun recommends using separate format instances for each thread. If multiple threads must access a static formatter, the formatter must be synchronized either on method or block level.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/UnsynchronizedStaticDateFormatterRule.html">net.sourceforge.pmd.lang.java.rule.design.UnsynchronizedStaticDateFormatterRule</a></p>
<p>Example(s):</p>

<div>
<pre>
    
public class Foo {
    private static final SimpleDateFormat sdf = new SimpleDateFormat();
    void bar() {
        sdf.format(); // poor, no thread-safety
    }
    synchronized void foo() {
        sdf.format(); // preferred
    }
}
    
      </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="PreserveStackTrace"></a>PreserveStackTrace</h2>
<p>Since: PMD 3.7</p>
<p>Priority: 3</p>
<p>Throwing a new exception from a catch block without passing the original exception into the new exception will cause the original stack trace to be lost making it difficult to debug effectively.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/PreserveStackTraceRule.html">net.sourceforge.pmd.lang.java.rule.design.PreserveStackTraceRule</a></p>
<p>Example(s):</p>

<div>
<pre>
    
public class Foo {
    void good() {
        try{
            Integer.parseInt(&quot;a&quot;);
        } catch (Exception e) {
            throw new Exception(e); // first possibility to create exception chain
        }
        try {
            Integer.parseInt(&quot;a&quot;);
        } catch (Exception e) {
            throw (IllegalStateException)new IllegalStateException().initCause(e); // second possibility to create exception chain.
        }
    }
    void bad() {
        try{
            Integer.parseInt(&quot;a&quot;);
        } catch (Exception e) {
            throw new Exception(e.getMessage());
        }
    }
}
    
      </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="UseCollectionIsEmpty"></a>UseCollectionIsEmpty</h2>
<p>Since: PMD 3.9</p>
<p>Priority: 3</p>
<p>The isEmpty() method on java.util.Collection is provided to determine if a collection has any elements. Comparing the value of size() to 0 does not convey intent as well as the isEmpty() method.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/UseCollectionIsEmptyRule.html">net.sourceforge.pmd.lang.java.rule.design.UseCollectionIsEmptyRule</a></p>
<p>Example(s):</p>

<div>
<pre>
    
public class Foo {
	void good() {
       	List foo = getList();
		if (foo.isEmpty()) {
			// blah
		}
   	}

    void bad() {
   	    List foo = getList();
			if (foo.size() == 0) {
				// blah
			}
    	}
}
    
      </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="ClassWithOnlyPrivateConstructorsShouldBeFinal"></a>ClassWithOnlyPrivateConstructorsShouldBeFinal</h2>
<p>Since: PMD 4.1</p>
<p>Priority: 1</p>
<p>A class with only private constructors should be final, unless the private constructor is invoked by a inner class.</p>

<div>
<pre>
TypeDeclaration[count(../TypeDeclaration) = 1]/ClassOrInterfaceDeclaration
[@Final = 'false']
[count(./ClassOrInterfaceBody/ClassOrInterfaceBodyDeclaration/ConstructorDeclaration[@Private = 'true']) &gt;= 1 ]
[count(./ClassOrInterfaceBody/ClassOrInterfaceBodyDeclaration/ConstructorDeclaration[(@Public = 'true') or (@Protected = 'true') or (@PackagePrivate = 'true')]) = 0 ]
[not(.//ClassOrInterfaceDeclaration)]
             </pre></div>
<p>Example(s):</p>

<div>
<pre>
public class Foo {  //Should be final
    private Foo() { }
}
     </pre></div></div>
<div class="section">
<h2><a name="EmptyMethodInAbstractClassShouldBeAbstract"></a>EmptyMethodInAbstractClassShouldBeAbstract</h2>
<p>Since: PMD 4.1</p>
<p>Priority: 1</p>
<p>Empty or auto-generated methods in an abstract class should be tagged as abstract. This helps to remove their inapproprate usage by developers who should be implementing their own versions in the concrete subclasses.</p>

<div>
<pre>
                
                    //ClassOrInterfaceDeclaration[@Abstract = 'true']
                        /ClassOrInterfaceBody
                        /ClassOrInterfaceBodyDeclaration
                        /MethodDeclaration[@Abstract = 'false' and @Native = 'false']
                        [
                            ( boolean(./Block[count(./BlockStatement) =  1]/BlockStatement/Statement/ReturnStatement/Expression/PrimaryExpression/PrimaryPrefix/Literal/NullLiteral) = 'true' )
                            or
                            ( boolean(./Block[count(./BlockStatement) =  1]/BlockStatement/Statement/ReturnStatement/Expression/PrimaryExpression/PrimaryPrefix/Literal[@Image = '0']) = 'true' )
                            or
                            ( boolean(./Block[count(./BlockStatement) =  1]/BlockStatement/Statement/ReturnStatement/Expression/PrimaryExpression/PrimaryPrefix/Literal[string-length(@Image) = 2]) = 'true' )
                            or
                            (./Block[count(./BlockStatement) =  1]/BlockStatement/Statement/EmptyStatement)
                            or
                            ( count (./Block/*) = 0 )
                        ]
                
             </pre></div>
<p>Example(s):</p>

<div>
<pre>
        	
public abstract class ShouldBeAbstract {
    public Object couldBeAbstract() {
        // Should be abstract method ?
        return null;
    }

    public void couldBeAbstract() {
    }
}
	     	
    	</pre></div></div>
<div class="section">
<h2><a name="SingularField"></a>SingularField</h2>
<p>Since: PMD 3.1</p>
<p>Priority: 3</p>
<p>Fields whose scopes are limited to just single methods do not rely on the containing object to provide them to other methods. They may be better implemented as local variables within those methods.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/SingularFieldRule.html">net.sourceforge.pmd.lang.java.rule.design.SingularFieldRule</a></p>
<p>Example(s):</p>

<div>
<pre>
public class Foo {
    private int x;  // no reason to exist at the Foo instance level
    public void foo(int y) {
     x = y + 5;
     return x;
    }
}
   </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
        
<tr class="a">
            
<td>
                disallowNotAssignment
            </td>
            
<td>
                false
            </td>
            
<td>
                Disallow violations where the first usage is not an assignment
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                checkInnerClasses
            </td>
            
<td>
                false
            </td>
            
<td>
                Check inner classes
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="ReturnEmptyArrayRatherThanNull"></a>ReturnEmptyArrayRatherThanNull</h2>
<p>Since: PMD 4.2</p>
<p>Priority: 1</p>
<p>For any method that returns an array, it is a better to return an empty array rather than a null reference. This removes the need for null checking all results and avoids inadvertent NullPointerExceptions.</p>

<div>
<pre>
                    
                        //MethodDeclaration
                        [
                        (./ResultType/Type[@Array='true'])
                        and
                        (./Block/BlockStatement/Statement/ReturnStatement/Expression/PrimaryExpression/PrimaryPrefix/Literal/NullLiteral)
                        ]
                    
                </pre></div>
<p>Example(s):</p>

<div>
<pre>
public class Example {
    // Not a good idea...
    public int[] badBehavior() {
                   // ...
        return null;
    }

    // Good behavior
    public String[] bonnePratique() {
      //...
     return new String[0];
    }
}
            </pre></div></div>
<div class="section">
<h2><a name="AbstractClassWithoutAnyMethod"></a>AbstractClassWithoutAnyMethod</h2>
<p>Since: PMD 4.2</p>
<p>Priority: 1</p>
<p>If an abstract class does not provides any methods, it may be acting as a simple data container that is not meant to be instantiated. In this case, it is probably better to use a private or protected constructor in order to prevent instantiation than make the class misleadingly abstract.</p>

<div>
<pre>
                    
//ClassOrInterfaceDeclaration[
	(@Abstract = 'true')
	and
	(count(//MethodDeclaration) + count(//ConstructorDeclaration) = 0)
]
                    
                </pre></div>
<p>Example(s):</p>

<div>
<pre>
            
public class abstract Example {
	String field;
	int otherField;
}
            
        </pre></div></div>
<div class="section">
<h2><a name="TooFewBranchesForASwitchStatement"></a>TooFewBranchesForASwitchStatement</h2>
<p>Since: PMD 4.2</p>
<p>Priority: 3</p>
<p>Switch statements are indended to be used to support complex branching behaviour. Using a switch for only a few cases is ill-advised, since switches are not as easy to understand as if-then statements. In these cases use the if-then statement to increase code readability.</p>

<div>
<pre>
                    
//SwitchStatement[
    (count(.//SwitchLabel) &lt; $minimumNumberCaseForASwitch)
]
                    
                </pre></div>
<p>Example(s):</p>

<div>
<pre>
            
// With a minimumNumberCaseForASwitch of 3
public class Foo {
    public void bar() {
        switch (condition) {
            case ONE:
                instruction;
                break;
            default:
                break; // not enough for a 'switch' stmt, a simple 'if' stmt would have been more appropriate
        }
    }
}
            
        </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                minimumNumberCaseForASwitch
            </td>
            
<td>
                3
            </td>
            
<td>
                Minimum number of branches for a switch
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="LogicInversion"></a>LogicInversion</h2>
<p>Since: PMD 5.0</p>
<p>Priority: 3</p>
<p>Use opposite operator instead of negating the whole expression with a logic complement operator.</p>

<div>
<pre>
          
//UnaryExpressionNotPlusMinus[@Image='!']/PrimaryExpression/PrimaryPrefix/Expression[EqualityExpression or RelationalExpression]
          
          </pre></div>
<p>Example(s):</p>

<div>
<pre>
    
public boolean bar(int a, int b) {

    if (!(a == b)) { // use !=
         return false;
     }

    if (!(a &lt; b)) { // use &gt;=
         return false;
    }

    return true;
}
    
    </pre></div></div>
<div class="section">
<h2><a name="UseVarargs"></a>UseVarargs</h2>
<p>Since: PMD 5.0</p>
<p>Priority: 4</p>
<p>Minimum Language Version: java 1.5</p>
<p>Java 5 introduced the varargs parameter declaration for methods and constructors. This syntactic sugar provides flexibility for users of these methods and constructors, allowing them to avoid having to deal with the creation of an array.</p>

<div>
<pre>
//FormalParameters/FormalParameter
    [position()=last()]
    [@Array='true']
    [@Varargs='false']
    [not (./Type/ReferenceType[@Array='true'][PrimitiveType[@Image='byte']])]
    [not (./Type/ReferenceType[ClassOrInterfaceType[@Image='Byte']])]
    [not (./Type/PrimitiveType[@Image='byte'])]
    [not (ancestor::MethodDeclaration/preceding-sibling::Annotation/*/Name[@Image='Override'])]
    [not(
        ancestor::MethodDeclaration
            [@Public='true' and @Static='true']
            [child::ResultType[@Void='true']] and
        ancestor::MethodDeclarator[@Image='main'] and
        ..[@ParameterCount='1'] and
        ./Type/ReferenceType[ClassOrInterfaceType[@Image='String']]
    )]
            </pre></div>
<p>Example(s):</p>

<div>
<pre>
public class Foo {
   public void foo(String s, Object[] args) {
      // Do something here...
   }

   public void bar(String s, Object... args) {
      // Ahh, varargs tastes much better...
   }
}
        </pre></div></div>
<div class="section">
<h2><a name="FieldDeclarationsShouldBeAtStartOfClass"></a>FieldDeclarationsShouldBeAtStartOfClass</h2>
<p>Since: PMD 5.0</p>
<p>Priority: 3</p>
<p>Fields should be declared at the top of the class, before any method declarations, constructors, initializers or inner classes.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/FieldDeclarationsShouldBeAtStartOfClassRule.html">net.sourceforge.pmd.lang.java.rule.design.FieldDeclarationsShouldBeAtStartOfClassRule</a></p>
<p>Example(s):</p>

<div>
<pre>
      
public class HelloWorldBean {

  // Field declared before methods / inner classes - OK
  private String _thing;

  public String getMessage() {
    return &quot;Hello World!&quot;;
  }

  // Field declared after methods / inner classes - avoid this
  private String _fieldInWrongLocation;
}
      
    </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
        
<tr class="a">
            
<td>
                ignoreAnonymousClassDeclarations
            </td>
            
<td>
                true
            </td>
            
<td>
                Ignore Field Declarations, that are initialized with anonymous class declarations
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                ignoreEnumDeclarations
            </td>
            
<td>
                true
            </td>
            
<td>
                Ignore Enum Declarations that precede fields.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="GodClass"></a>GodClass</h2>
<p>Since: PMD 5.0</p>
<p>Priority: 3</p>
<p>The God Class rule detects the God Class design flaw using metrics. God classes do too many things, are very big and overly complex. They should be split apart to be more object-oriented. The rule uses the detection strategy described in &#x201c;Object-Oriented Metrics in Practice&#x201d;. The violations are reported against the entire class. See also the references: Michele Lanza and Radu Marinescu. Object-Oriented Metrics in Practice: Using Software Metrics to Characterize, Evaluate, and Improve the Design of Object-Oriented Systems. Springer, Berlin, 1 edition, October 2006. Page 80.</p>
<p>This rule is defined by the following Java class: <a href="../../xref/net/sourceforge/pmd/lang/java/rule/design/GodClassRule.html">net.sourceforge.pmd.lang.java.rule.design.GodClassRule</a></p>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                violationSuppressRegex
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations with messages matching a regular expression
            </td>
        </tr>
    
        
<tr class="b">
            
<td>
                violationSuppressXPath
            </td>
            
<td>
                
            </td>
            
<td>
                Suppress violations on nodes which match a given relative XPath expression.
            </td>
        </tr>
    
</table></div>
<div class="section">
<h2><a name="AvoidProtectedMethodInFinalClassNotExtending"></a>AvoidProtectedMethodInFinalClassNotExtending</h2>
<p>Since: PMD 5.1</p>
<p>Priority: 3</p>
<p>Do not use protected methods in most final classes since they cannot be subclassed. This should only be allowed in final classes that extend other classes with protected methods (whose visibility cannot be reduced). Clarify your intent by using private or package access modifiers instead.</p>

<div>
<pre>

//ClassOrInterfaceDeclaration[@Final='true' and not(ExtendsList)]
/ClassOrInterfaceBody/ClassOrInterfaceBodyDeclaration
/MethodDeclaration[@Protected='true'][MethodDeclarator/@Image != 'finalize']
 
                 </pre></div>
<p>Example(s):</p>

<div>
<pre>

public final class Foo {
  private int bar() {}
  protected int baz() {} // Foo cannot be subclassed, and doesn't extend anything, so is baz() really private or package visible? 
}
 
         </pre></div></div>
<div class="section">
<h2><a name="ConstantsInInterface"></a>ConstantsInInterface</h2>
<p>Since: PMD 5.5</p>
<p>Priority: 3</p>
<p>Avoid constants in interfaces. Interfaces should define types, constants are implementation details better placed in classes or enums. See Effective Java, item 19.</p>

<div>
<pre>

//ClassOrInterfaceDeclaration[@Interface='true'][$ignoreIfHasMethods='false' or not(.//MethodDeclaration)]//FieldDeclaration
 
                </pre></div>
<p>Example(s):</p>

<div>
<pre>

public interface ConstantInterface {
    public static final int CONST1 = 1; // violation, no fields allowed in interface!
    static final int CONST2 = 1; // violation, no fields allowed in interface!
    final int CONST3 = 1; // violation, no fields allowed in interface!
    int CONST4 = 1; // violation, no fields allowed in interface!
}

// with ignoreIfHasMethods = false
public interface AnotherConstantInterface {
    public static final int CONST1 = 1; // violation, no fields allowed in interface!
    
    int anyMethod();
}

// with ignoreIfHasMethods = true
public interface YetAnotherConstantInterface {
    public static final int CONST1 = 1; // no violation
    
    int anyMethod();
}
 
        </pre></div>
<p>This rule has the following properties:</p>

<table border="0" class="table table-striped">
    
<th>
        Name
    </th>
    
<th>
        Default Value
    </th>
    
<th>
        Description
    </th>
    
        
<tr class="a">
            
<td>
                ignoreIfHasMethods
            </td>
            
<td>
                true
            </td>
            
<td>
                Whether to ignore constants in interfaces if the interface defines any methods
            </td>
        </tr>
    
</table></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2002&#x2013;2016
                        <a href="http://pmd.sourceforge.net/">InfoEther</a>.
            All rights reserved.      
                    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
